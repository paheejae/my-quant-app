import streamlit as st
import pandas as pd

# 1. 앱 페이지 설정
st.set_page_config(page_title="Medallion Sungjun", layout="wide")

# 2. 사용자 계좌 데이터 입력 (이미지 기반)
data = [
    {"종목명": "이오테크닉스", "매입가": 388850, "현재가": 363000, "수량": 10},
    {"종목명": "리노공업", "매입가": 98600, "현재가": 96100, "수량": 5},
    {"종목명": "다원시스", "매입가": 2882, "현재가": 2450, "수량": 243},
    {"종목명": "테크윙", "매입가": 47588, "현재가": 44800, "수량": 40},
    {"종목명": "크래프톤", "매입가": 244164, "현재가": 259000, "수량": 14},
    {"종목명": "꿈비", "매입가": 7702, "현재가": 4995, "수량": 754},
    {"종목명": "샌즈랩", "매입가": 7350, "현재가": 7060, "수량": 10},
    {"종목명": "삼양컴텍", "매입가": 12206, "현재가": 12650, "수량": 150}
]
df = pd.DataFrame(data)

# 수익률 계산 로직
df['수익금'] = (df['현재가'] - df['매입가']) * df['수량']
df['수익률'] = ((df['현재가'] / df['매입가']) - 1) * 100
total_profit = df['수익금'].sum()

# 3. 앱 화면 구성
st.title("💎 sungjun님의 실시간 퀀트 대시보드")

# 상단 요약 바
col1, col2, col3 = st.columns(3)
with col1:
    st.metric("총 평가손익", f"{total_profit:,.0f}원", delta=f"{total_profit:,.0f}원")
with col2:
    st.metric("가용 현금", "3,000,000원") # [cite: 2026-01-28]
with col3:
    st.metric("전략 상태", "분석 완료 (8:10)") # [cite: 2026-01-27]

# 포트폴리오 리스트
st.divider()
st.subheader("📊 현재 포트폴리오")
st.dataframe(df[['종목명', '수량', '매입가', '현재가', '수익률']], use_container_width=True)

# 4. 짐 사이먼스의 리밸런싱 제안 [cite: 2026-01-29]
st.divider()
st.subheader("🔄 오늘의 리밸런싱 신호")
st.warning("⚠️ '꿈비'의 손실 폭(-35.3%)이 퀀트 기준을 초과했습니다. 비중 축소 후 상위 종목 교체를 검토하세요.")
